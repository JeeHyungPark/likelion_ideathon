<!DOCTYPE html>
{% load sass_tags %}
{% load static %}
<html>
<head>
  <title>Like Lion Ideathon</title>
  <link href="{% sass_src 'style/detail.scss' %}" rel="stylesheet" type="text/css"/> 
  <link href="{% static 'style/detail.scss' %}" rel="stylesheet" type="text/css"/> 
</head>

<body>

<div class = "container">

    <div class = "header">
        <a href="/"><img class="logo" src="{% static 'img/basiclogo_E_H.png' %}">&nbsp;<b>IDEATHON</b></a>
        <span class="menu">
            <a href="#">Log out</a>
            |
            <a href="#">My Page</a>
        </span>
    </div>

    <div class = "content">
        <div class = "no">
        </div>

        <div class = "idea">

            <div class = 'idea_container'>

                <div class = "title">
                        <div class = "title_name">
                            <p>{{detail.idea_title}}</p>
                        </div>

                        <div class = "title_sub">
                            <p>{{detail.idea_subtitle}}</p>
                        </div>
                </div>

                <div class = "author_info">
                    <div class = "author_info_school">
                        <p>학교이름 가져와야함</p>
                    </div>

                    <div class = "author_info_name">
                        <p>{{user_profile.user_name}}</p>
                    </div>
                    
                    <div class = "author_info_time">
                        <p>{{detail.idea_create_data}}</p>
                    </div>
                </div>

                <div class = "image">
                    <div class = "image_box">
                        <img class = "image_real" src = "{% static 'img/1.png' %}" width = "800px" height = "100%">
                        <img class = "image_real" src = "{% static 'img/1.png' %}" width = "800px" height = "100%">
                    </div>
                </div>

                <div class = "description">
                    <div class = "description_box">
                        <p>{{detail.idea_description}}</p>
                    </div>
                </div>

                <div class = "bot">
                    <div class = "bot_box">

                        <div class = "bot_box_hashbox">
                            <div class = "bot_box_hashbox_hashtag">
                                {% for i in hash_tag %}
                                    <div class = "bot_box_hashbox_hashtag_item">
                                        #{{i}}
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
    
                        <div class = "bot_box_edit">
                            <div class = "bot_box_edit_box1">
                                <a href="{% url 'edit' detail.id %}">수정</a>
                            </div>
                            <div class = "bot_box_edit_box2">
                                <a href="{% url 'delete' detail.id %}">삭제</a>
                            </div>
                        </div>

                    </div>
            
                </div>
            
            </div>

        </div>

    </div>

    <div class = "comment">
        
        <div class = "no">
            
        </div>

        <div class = "comments">
            <div class = "comments_container">
                <div class = "comments_box">
                    {% if user2 %}
                    <div class = "comments_box_input">
                        <div class = "comments_box_input_start">
                            <div class = "comments_box_input_start_image">
                                <img src = "{% static 'img/1.png' %}" width = "25px" height = "25px">
                            </div>
                            <div class = "comments_box_input_start_school">
                                <p>대학교</p>
                            </div>
                            <div class = "comments_box_input_start_name">
                                <p>이름</p>
                            </div>
                        </div>

                        <form action = "" class = "comments_box_input_form" method = POST>
                            {% csrf_token %}
                            <input type = "text" placeholder = "아이디어에 대한 의견을 자유롭게 작성해주세요!" name = "comment">
                            <button type=submit class = "comments_box_input_form_button"><p>제출</p></button>
                        </form>

                    </div>
                    {% else %}
                    <div class = "comments_box_input_none">
                        <div class = "comments_box_input_none_box">
                            <div class = "comments_box_input_none_text">
                                <h6>댓글을 달려면 로그인을 해주세요</h6>
                            </div>
                            <div class = "comments_box_input_none_button">
                                <a href = "{% url 'signin' %}">로그인</a>
                            </div>
                        </div>
                    </div>
                    {% endif %}
                </div>

                <div class = "comments_order_box">
                    <div class = "comments_order_box_order">
                        <div class = "comments_order_box_order_item1">
                            <h5> 1 개의 댓글이 있습니다</h5>
                        </div>
                        
                        {% if comment %}
                        <div class = "comments_order_box_order_item2">
                            <button type="menu" class = "comments_order_box_order_item2_button">최신순</button>
                            <button type="menu" class = "comments_order_box_order_item2_button">답글순</button>
                        </div>
                        {% else %}
                        
                        {% endif %}
                    </div>
                </div>

                <div class = "comments_list">
                
                    <div class = "comments_box">
                        {% for comment in comment_list %}
                        <div class = "comments_real">
                            <div class = "comments_author_info">
                                <div class = "comments_author_info_image">
                                    <img src = "{% static 'img/1.png' %}" width = "25px" height = "25px">
                                </div>
                                <div class = "comments_author_info_name">
                                    이름
                                </div>
                                <div class = "comments_author_info_school">
                                    대학교
                                </div>
                                <div class = "comments_author_info_time">
                                    {{comment.create_data}}
                                </div>
                            </div>

                            <div class = "comments_content_box">

                                <div class = "comments_content">
                                    {{comment.text}}         
                                    {{comment.pk}}                           
                                </div>
    
                                <div class = "comments_add">
                                    <button class = "comments_add_button" type="menu" name = "btn-comment">답글</button>
                                </div>
    
                                <div id = "add_comment_list" class = "add_comment_list">

                                    <div class = 'add_comment_count'>
                                        <h5> 1 개의 답글</h5>
                                    </div>

                                {% for add_comments in addcomment_list %}
                                    <div class = "add_comment">
                                        
                                        <div class = "add_comment_author_info">
                                            <div class = "add_comment_author_info_image">
                                                <img src = "{% static 'img/2.jpg' %}" width = "25px" height = "25px">
                                            </div>
                                            <div class = "add_comment_author_info_name">
                                                이름
                                            </div>
                                            <div class = "add_comment_author_info_school">
                                                대학교
                                            </div>
                                            <div class = "add_comment_author_info_time">
                                                {{add_comments.create_data}}
                                            </div>
                                        </div>

                                        <div class = "add_comment_content">
                                            {{add_comments.text}}
                                        </div>

                                    </div>
                                {% endfor %}    
                                <div id = "new_comment" class = "new_comment">
                                    <form action = "" class = "new_comment_form" method = POST>
                                        {% csrf_token %}
                                        <input type = "text" class = "new_comment_on_input" placeholder = "댓글에 대한 답글을 입력해주세요" name = "addcomment">
                                        <button type=submit class = "new_comment_on_button">제출</button>
                                    </form>
                                </div>
                                </div>

                            </div>
                        </div>
                        {% endfor %}
                    </div>                            
                </div>
            </div>
        </div>

    </div>

    <div class = "footer">

    </div>

</div>
</body>

<script type = "text/javascript">

    const add_comment = document.getElementById("new_comment");
    const add_comment_list = document.getElementById("add_comment_list")
    let btn_comment = document.getElementsByName('btn-comment');

    const NEW_COMMENT_ON = "new_comment_on";
    const NEW_COMMENT = "new_comment"
    const ADD_COMMENT_LIST = "add_comment_list";
    const ADD_COMMENT_LIST_ON = "add_comment_list_on";

    function handleClick(){
        const currentClass = add_comment.className;
        console.log(currentClass);

        if (currentClass == NEW_COMMENT){
            add_comment.classList.add(NEW_COMMENT_ON);
            add_comment_list.classList.add(ADD_COMMENT_LIST_ON);
        } else {
            add_comment.classList.remove(NEW_COMMENT_ON);
            add_comment_list.classList.remove(ADD_COMMENT_LIST_ON);
        }
    }

    function init(){
        console.log(btn_comment);
        for (let i=0; i<btn_comment.length; i++){
            btn_comment[i].addEventListener("click", handleClick);
        }
    };

    init();    

</script>

</html>