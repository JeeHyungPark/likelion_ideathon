<!DOCTYPE html>
{% load sass_tags %}
{% load static %}
<html>
<head>
  <title>Like Lion Ideathon</title>
  <link href="{% sass_src 'style/detail.scss' %}" rel="stylesheet" type="text/css"/> 
  <link href="{% static 'style/detail.scss' %}" rel="stylesheet" type="text/css"/> 
</head>

<body>

<div class = "container">

    <div class = "header">
        <a href="/"><img class="logo" src="{% static 'img/basiclogo_E_H.png' %}">&nbsp;<b>IDEATHON</b></a>
        <span class="menu">
            <a href="#">Log out</a>
            |
            <a href="#">My Page</a>
        </span>
    </div>

    <div class = "content">
        <div class = "no">
        </div>

        <div class = "idea">
            <div class = "idea_container">
                
                <div class = "title">
                    <p>북적북적</p>
                </div>

                <div class = "sub_title">

                    <div class = "sub_title_name">
                        <p>북 트레일러 영상 공유 플래폼</p>
                    </div>

                    <div class = "sub_title_school">
                        <p>멋사대학교</p>
                    </div>

                    <div class = "sub_title_author">
                        <p>홍길동</p>
                    </div>

                    <div class = "sub_title_time">
                        <p>작성시간</p>
                    </div>

                </div>

                <div class = "image">
                    <div class = "image_box">
                        <img class = "slide" src = "{% static 'img/1.png' %}" width = "700px" height = "400px">
                    </div>
                    <img class = "slide" src = "{% static 'img/1.png' %}" width = "700px" height = "400px">
                    <img class = "slide" src = "{% static 'img/1.png' %}" width = "700px" height = "400px">
                </div>

                <div class = "description">
                    <p>이렇고 저렇고</p><br>
                    <p>이렇고 저렇고</p><br>
                    <p>이렇고 저렇고</p>
                </div>

                <div class = "bot">
                    <div class = "bottom">
                        <div class = "bottom_item">
                            #북 트레일러
                        </div>
                        <div class = "bottom_item">
                            #영상
                        </div>
                        <div class = "bottom_item">
                            #플랫폼
                        </div>
                        <div class = "bottom_item">
                            #북 트레일러
                        </div>
                        <div class = "bottom_item">
                            #가나다라마바사아자차카타파하
                        </div>
                        <div class = "bottom_item">
                            #북 트레일러
                        </div>
                        <div class = "bottom_item">
                            #북 트레일러
                        </div>
                        <div class = "bottom_item">
                            #북 트레일러
                        </div>
                        <div class = "bottom_item">
                            #북 트레일러
                        </div>
                        <div class = "bottom_item">
                            #북 트레일러
                        </div>
                        <div class = "bottom_item">
                            #북 트레일러
                        </div>
                    </div>
    
                    <div class = "edit">
                        <div class = "edit_box1">
                            <p>수정</p>
                        </div>
                        <div class = "edit_box2">
                            <p>삭제</p>
                        </div>
                    </div>
                </div>
        

            </div>
        </div>
    </div>

    <div class = "comment">
        <div class = "no">
            
        </div>

            <div class = "comments">
                
                <div class = "comment_start">
                    <div>댓글 달기</div>
                </div>

                <div class = "comment_input">
                    <div class = "comment_input_box1">
                        <form action = "" class = "comment_form" method = POST>
                            {% csrf_token %}
                            <input type = "text" placeholder = "Show me The Opinion" name = "comment">
                            <button type=submit >제출</button>
                        </form>
                    </div>
                </div>

                <div class = "comment_order">
                    <div class = "order_item1">
                        <h5>" "개의 댓글이 있습니다</h5>
                    </div>
                    
                    <div class = "order_item2">
                        <button type="menu">최신순</button>
                        <button type="menu">답글순</button>
                    </div>
                </div>

                
                {% for comment in comment_list %}
                    <div class = "comment_list">
                        <div class = "comment_list_info">
                            <div class = "comment_list_author">
                                <div class = "author_image">
                                </div>
                                <div class = "comment_author">
                                    이름
                                </div>
                                <div class = "comment_school">
                                    대학교
                                </div>
                                <div class = "comment_time">
                                    {{comment.create_data}}
                                </div>
                            </div>
                        </div>
                        
                    
                        <div class = "comment_list_content">
                            <div class = "comment_content">
                                <div class = "content_comment">
                                    {{comment.text}}         
                                    {{comment.pk}}                           
                                </div>

                                <div class = "comment_add">
                                    <button type="menu" id = "btn-comment">답글</button>
                                </div>

                                <div id = "new_comment" class = "new_comment">
                                    <form action = "" class = "add_comment_form" method = POST>
                                        {% csrf_token %}
                                        <input type = "text" placeholder = "Show me The Opinion" name = "addcomment">
                                        <button type=submit >제출</button>
                                    </form>
                                </div>

                                <div id = "add_comment_list" class = "add_comment_list">
                                {% for add_comments in addcomment_list %}
                                    <div class = "add_comment">
                                        {% if comment.comment_pk == 1 %}
                                        {{add_comments.text}}
                                        {% endif %}
                                    </div>
                                {% endfor %}
                                </div>
                                
                            </div>
                        </div>

                    </div>
                    {% endfor %}
                
            </div>
            
    </div>

    <div class = "footer">

    </div>

</div>
</body>

<script type = "text/javascript">

    const add_comment = document.getElementById("new_comment");
    const add_comment_list = document.getElementById("add_comment_list")
    const btn_comment = document.getElementById('btn-comment');

    const NEW_COMMENT_ON = "new_comment_on";
    const NEW_COMMENT = "new_comment"
    const ADD_COMMENT_LIST = "add_comment_list";
    const ADD_COMMENT_LIST_ON = "add_comment_list_on";

    function handleClick(){
        const currentClass = add_comment.className;
        console.log(currentClass);

        if (currentClass == NEW_COMMENT){
            add_comment.classList.add(NEW_COMMENT_ON);
            add_comment_list.classList.add(ADD_COMMENT_LIST_ON);
        } else {
            add_comment.classList.remove(NEW_COMMENT_ON);
            add_comment_list.classList.remove(ADD_COMMENT_LIST_ON);
        }
    }

    function init(){
        btn_comment.addEventListener("click", handleClick);
    };

    init();    

    // let comment = "{{comment}}";
    // console.log(comment);

    // let comment_list = "{{comment_list}}"
    // // let parsed_list = JSON.parse(comment_list);
    // console.log(comment_list);
    // // console.log(parsed_list);

    // const CommentForm = document.querySelector(".comment_form");
    // // const CommentInput = CommentForm.querySelector("input");
    // const Comments = document.querySelector(".comment_list2");

    // console.log(CommentForm);
    // console.log(CommentInput);

    // const list_comments = "List";

    // let CommentArray = [];

    // function DeleteComment(event){

    //     const target = event.target;
    //     const Del_li = target.parentNode;
    //     Comments.removeChild(Del_li);

    //     const CleanCommentArray = CommentArray.filter(function(comment){
    //         return comment.id !== parseInt(Del_li.id);
    //     })  // 선택한 id 빼고 저장해줌

    //     CommentArray = CleanCommentArray;   // 교체
    //     SaveComments;
    // }

    

    // function SaveComments(){
    //     localStorage.setItem(list_comments, JSON.stringify(CommentArray));
    // }

    // function AddComment(comment){

    //     const li = document.createElement("li");

    //     // li 에 들어갈 것들
    //     const delBtn = document.createElement("button");
    //     const span = document.createElement("span");
    //     const NewId = CommentArray.length + 1;

    //     delBtn.innerText = "삭제"; // innertext 는 value 값 지정
    //     delBtn.addEventListener("click", DeleteComment);
    //     span.innerText = comment;
        
    //     li.appendChild(span);   // li 안에 span 넣고
    //     li.appendChild(delBtn);   // li 안에 delBtn 넣고
    //     li.id = NewId;  // li에 id 부여

    //     Comments.appendChild(li);

    //     const CommentObj = {
    //         comment : comment,
    //         id : NewId,
    //     };

    //     CommentArray.push(CommentObj);
    //     SaveComments();
    // }

    // function something(Comment){
    //     AddComment(Comment.text);
    // }

    // // function handleSubmit(event){   // submit 시 동작어떻게 할지
    // //     event.preventDefault();
    // //     const comment = CommentInput.value;
    // //     AddComment(comment);
    // //     CommentInput.value = ""; // submit 시 댓글 창 초기화
    // // }

    // function ShowComment(index){
    //     const list = localStorage.getItem(list_comments); // 로컬에 set 한 것들을 getItem
        
    //     if (list !== null){
    //         const parsedCommentList = JSON.parse(list);
    //         something(parsedCommentList);
    //     }
    // }

    // function init(){
    //     ShowComment();
    //     CommentForm.addEventListener("submit", handleSubmit);
    // }

    // init();

</script>

</html>