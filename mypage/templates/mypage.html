<!--@brief: js ready 함수 구현으로 인해 첫 페이지에 모든 text들이 다 rendering -->
<!--@todo: js ready 함수에서 다른 함수로 변경-->

<!DOCTYPE html>
{% load sass_tags %}
{% load static %}
<html>

<head>
    <title>Like Lion Ideathon</title>
    <!-- font awesome -->
    <script src="https://kit.fontawesome.com/5220950911.js" crossorigin="anonymous"></script>
    <!-- jquery -->

    <script src="https://code.jquery.com/jquery-3.5.0.js"
        integrity="sha256-r/AaFHrszJtwpe+tHyNi/XCfMxYpbsRg2Uqn0x3s2zc=" crossorigin="anonymous"></script>

    <link href="{% sass_src 'style/mypage.scss' %}" rel="stylesheet" type="text/css" />
</head>
<style>
    #mypage_edit {
        margin: 0 auto;
        width: 210px;
    }

    #mypage_edit input {
        display: inline-block;
        text-align: left;
    }

    input[type="text"] {
        height: auto;
        padding: .8em .5em;
    }
</style>

<body>
    <div class="header">
        <a href="/"><img class="logo" src="{% static 'img/basiclogo_E_H.png' %}">&nbsp;<b>IDEATHON</b></a>
        <span class="menu">
            <a href="#">Log out</a>
            |
            <a href="{% url 'mypage' %}">My Page</a>
        </span>
    </div>
    <div class="mypage">
        <div class="mypage__top">
            <img src="{{profile.user_profile}}">
            <img src="{% static 'image/ironman.jpg' %}" />
            <h3> {{profile.user_name}} </h3>
            <h6 class="email"> {{profile.email}} </h6>
            <div class="icon">
                <i class="far fa-comment-dots fa-2x" style="color: black"></i>
                <a href="{% url 'comments' %}">
                    <h5 class="comment_num">{{comment_all}}</h5>
                </a>
                <i class="fas fa-shopping-basket fa-2x"></i>
                <h5 class="basket_num"> {{cart_all}}</h5>
                <div class="edit_button">
                    <i class="far fa-address-card "></i>
                </div>
            </div>
        </div>

        <div class="mypage__bottom">
            <div class="menu">
                <h4 id="profile" class="menuelem menu__profile"> 프로필 </h4>
                <h4 id="myidea" class="menuelem menu__myidea"> 내 아이디어 </h4>
                <h4 id="basket" class="menuelem menu__basket"> 장바구니 </h4>
            </div>
            <div class="content profile">
                <h6 class="title"> Department </h6>
                <h6 class="description"> {{profile.user_school}} </h6>
                <h6 class="title"> About </h6>
                <h6 class="description"> {{profile.user_about}} </h6>
                <h6 class="title"> Contact </h6>
                <h6 class="description">{{profile.user_contact}}</h6>
            </div>
            <div class="myidea_ideacards">
                {% if myidea %}
                {% for idea in myidea %}
                <a href="{% url 'detail' idea.id %}">
                    <div class="card ideacard card_href" style="display: inline;">
                        <div class="cardImg_board"><img class="card_image" src="{% static 'image/bg8.jpg' %}"></div>
                        <!--16:9-->
                        <span class="idea_name">{{idea.idea_title}}</span>
                        <p>{{idea.idea_subtitle}}</p>
                        <div class="user_div">
                            <hr>
                            <img class="cardprofile" src="{{idea.user_image}}">{{idea.user}}<i
                                class="far fa-comment">&nbsp;{{idea.idea_likecount}}</i>
                        </div>
                    </div>
                </a>
                {% endfor %}
                {% else %}
                <h3>올린 아이디어가 없습니다.</h3>
                {% endif %}
            </div>
            <div class="basket">
                {% if cart %}
                {% for favorite in cart %}
                <a href="{% url 'detail' favorite.id %}">
                    <div class="card ideacard card_href" style="display: inline;">
                        <div class="cardImg_board"><img class="card_image" src="{% static 'image/bg8.jpg' %}"></div>
                        <!--16:9-->
                        <span class="idea_name">{{favorite.idea_title}}</span>
                        <p>{{favorite.idea_subtitle}}</p>
                        <div class="user_div">
                            <hr>
                            <img class="cardprofile" src="{{favorite.user_image}}">{{favorite.user}}<i
                                class="far fa-comment">&nbsp;{{favorite.idea_likecount}}</i>
                        </div>
                    </div>
                </a>
                {% endfor %}
                {% else %}
                <h3>담긴 아이디어가 없습니다.</h3>
                {% endif %}
            </div>

        </div>
    </div>

    <div id="mypage_edit">
        <form action="{% url 'edit' %}" method='POST'>
            {% csrf_token %}
            <table>
                <input name="password" type="password" value="">
                <input name="new_password" type="password" value="">
                <input name="password_confirm" type="password" value="">
            </table>
            <br>
            <input class="btn btn-dark" type="submit">
        </form>    
    </div>
    {% include 'footer.html' %}

    <script>
        $(document).ready(function () {
            $(".menuelem").on("click", function (e) {
                console.log(this.id)
                var clickId = this.id
                $(".content").css({
                    "display": "none",
                })
                $("." + clickId).css({
                    "display": "block",
                })
                $("#mypage_edit").css({
                    "display": "none",
                })

            })
            $(".edit_button").on("click", function (e) {
                var edit_info = document.getElementById('mypage_edit');
                $(".content").css({
                    "display": "none",
                })
                $("#mypage_edit").css({
                    "display": "block",
                })
            })
        })
    </script>
</body>

</html>